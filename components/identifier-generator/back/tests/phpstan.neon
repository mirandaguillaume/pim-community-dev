includes:
    - %currentWorkingDirectory%/vendor/phpstan/phpstan-symfony/extension.neon
    - %currentWorkingDirectory%/vendor/phpstan/phpstan-webmozart-assert/extension.neon
    - baseline.neon

parameters:
    level: max
    paths:
        - %currentWorkingDirectory%/components/identifier-generator
    reportUnmatchedIgnoredErrors: false
    ignoreErrors:
        # DBAL methods return mixed in type stubs (PHPStan 1.12+ strictness)
        - '#Parameter \#1 \$value of function intval expects array\|bool\|float\|int\|resource\|string\|null, mixed given#'
        - '#Cannot access offset string on mixed#'
        - '#Parameter \#1 \$callback of function array_map expects \(callable\(mixed\): mixed\)\|null, .strval. given#'
        - '#Parameter \#1 \$callback of function array_map expects \(callable\(mixed\): mixed\)\|null, .intval. given#'
        # preg_match named groups may not exist in the result array
        - "#Offset 'number' (does not|might not) exist on array#"
        # PHPStan 2.x type precision — array<string> vs array, array<string, mixed> vs array
        - '#Parameter .+ expects array<string(, mixed)?>, array(\<mixed(, mixed)?\>)? given#'
        - '#Parameter .+ expects list<array<string, mixed>>, list<mixed> given#'
        - '#Parameter .+ expects array<string, string>, array<mixed, mixed> given#'
        # PHPStan 2.x — mixed parameter/return types from DBAL/JSON decode
        - '#Parameter .+ expects string, mixed given#'
        - '#Parameter .+ expects array, mixed given#'
        - '#should return string but returns mixed#'
        - '#should return array<string, mixed> but returns array<mixed>#'
        - '#Cannot access offset .+ on mixed#'
        - '#Possibly invalid array key type mixed#'
        - '#Parameter .+ expects bool\|float\|int\|string\|null, mixed given#'
        - '#Parameter .+ expects .+WriteValueCollection, mixed given#'
        # PHPStan 2.x — Closure type narrowing for array_map callbacks
        - '#Parameter \#1 \$callback of function array_map expects \(callable\(mixed\): mixed\)\|null, Closure\(.+\): .+ given#'
        # PHPStan 2.x — Webmozart Assert always true/false
        - '#Call to static method Webmozart\\Assert\\Assert::\w+\(\) .+ will always evaluate to (true|false)#'
        # PHPStan 2.x — return type narrowing
        - '#never returns .+ so it can be removed from the return type#'
        # PHPStan 2.x — strict comparison always true/false
        - '#Strict comparison using [!=]+ between .+ will always evaluate to (true|false)#'
        # PHPStan 2.x — fromNormalized expects shaped array vs array<mixed, mixed>
        - '#Parameter .+ expects array\{.+\}, array<mixed, mixed> given#'
        # PHPStan 2.x — method return type shape mismatches (array shapes, list vs array)
        - '#Method .+ should return array\{.+\} but returns array\{.+\}#'
        - '#Method .+ should return list<.+> but returns array<.+>#'
        - '#Method .+ should return array\{.+\} but returns array<mixed, mixed>#'
